<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lupa Ecol√≥gica | Mapeo Sem√°ntico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --verde-principal: #1a472a;
            --verde-claro: #2e7d32;
            --fondo: #fcfdfc;
            --texto: #2c3e50;
            --card-bg: #ffffff;
            --card-border: #e0e0e0;
        }

        [data-bs-theme="dark"] {
            --fondo: #121212;
            --texto: #e0e0e0;
            --card-bg: #1e1e1e;
            --card-border: #333333;
            --verde-principal: #2e7d32;
            --verde-claro: #4caf50;
        }

        body { 
            background-color: var(--fondo); 
            color: var(--texto);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Hero */
        .hero { 
            background: var(--verde-principal); 
            color: white; 
            padding: 80px 0 40px 0; 
            border-bottom: 8px solid var(--verde-claro);
        }

        /* Cards y Secciones */
        .section-title {
            color: var(--verde-principal);
            border-left: 5px solid var(--verde-claro);
            padding-left: 15px;
            margin: 40px 0 20px 0;
            text-transform: uppercase;
            font-weight: bold;
        }

        .card-custom {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 20px;
        }

        /* Bot√≥n Flotante de Descargas */
        .floating-dl {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .dl-menu {
            background-color: var(--card-bg);
            border: 1px solid var(--verde-principal);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            padding: 15px;
            display: none;
            width: 250px;
            margin-bottom: 10px;
        }

        .dl-menu a {
            display: block;
            padding: 8px 12px;
            text-decoration: none;
            color: var(--texto);
            border-radius: 6px;
            font-size: 0.9rem;
            margin-bottom: 5px;
            transition: 0.2s;
        }

        .dl-menu a:hover {
            background-color: var(--verde-principal);
            color: white;
        }

        /* Switch de Modo */
        .theme-switch {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            background: var(--verde-principal);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn-verde {
            background-color: var(--verde-principal);
            color: white;
            border: none;
        }

        .btn-verde:hover { background-color: var(--verde-claro); color: white; }

        footer { background: #111; color: #888; padding: 40px 0; margin-top: 60px; }
    </style>
</head>
<body data-bs-theme="light">

    <button class="theme-switch" onclick="toggleTheme()" title="Cambiar modo">üåì</button>

    <div class="floating-dl text-end">
        <div class="dl-menu text-start" id="dlMenu">
            <h6 class="fw-bold mb-3" style="color:var(--verde-claro)">Descargas Cr√≠ticas</h6>
            <a href="data/mongabay_peru_raw.csv" download>üìÑ Datos Raw (CSV)</a>
            <a href="data/mongabay_semantico_con_activadores.csv" download>üìä Dataset Sem√°ntico</a>
            <a href="scripts/mongabay.py" download>üêç Script: Scraper</a>
            <a href="scripts/analisis_semantico_mongabay.py" download>üêç Script: An√°lisis NLP</a>
        </div>
        <button class="btn btn-verde rounded-pill px-4 py-2 shadow-lg" onclick="toggleMenu()">
            üì• Descargas R√°pidas
        </button>
    </div>

    <header class="hero text-center">
        <div class="container">
            <h1 class="display-4 fw-bold">üîç Lupa Ecol√≥gica</h1>
            <p class="lead opacity-75">Agenda Ambiental en el Per√∫ (2020‚Äì2025)</p>
        </div>
    </header>

    <div class="container my-5">
        <div class="row">
            <div class="col-lg-9 mx-auto">
                
                <section>
                    <h2 class="section-title">1. Marco Institucional</h2>
                    <p><strong>Mongabay</strong> es una organizaci√≥n medi√°tica independiente y sin fines de lucro que informa sobre la naturaleza y los desaf√≠os planetarios a trav√©s de una red global de periodistas locales.</p>
                </section>

                <section>
                    <h2 class="section-title">2. Objetivo del Proyecto</h2>
                    <div class="card-custom">
                        <p>Esta investigaci√≥n identifica las prioridades tem√°ticas y los patrones discursivos en la cobertura period√≠stica ambiental sobre el Per√∫. El fin es visualizar qu√© aspectos del deterioro ambiental reciben mayor atenci√≥n medi√°tica en un pa√≠s megadiverso.</p>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">3. Metodolog√≠a T√©cnica</h2>
                    <div class="row g-4">
                        <div class="col-md-6">
                            <div class="h-100 card-custom">
                                <h5>Extracci√≥n</h5>
                                <p class="small">Uso de <strong>Python (BeautifulSoup)</strong> para el raspado de 41 p√°ginas del archivo hist√≥rico de Mongabay Per√∫.</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="h-100 card-custom">
                                <h5>NLP (spaCy)</h5>
                                <p class="small">Lematizaci√≥n y detecci√≥n por activadores sem√°nticos mediante el modelo <code>es_core_news_md</code>.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2 class="section-title">4. Resultados</h2>
                    <table class="table table-hover mt-3" style="color: var(--texto);">
                        <thead>
                            <tr>
                                <th>Eje Sem√°ntico</th>
                                <th class="text-center">Menciones</th>
                                <th class="text-center">Link</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Biodiversidad y Conservaci√≥n</td><td class="text-center">584</td><td class="text-center"><a href="data/ejes/biodiversidad_conservacion.csv" download class="btn btn-sm btn-outline-success">CSV</a></td></tr>
                            <tr><td>Pol√≠tica y Gobernabilidad</td><td class="text-center">281</td><td class="text-center"><a href="data/ejes/politica_gobernabilidad.csv" download class="btn btn-sm btn-outline-success">CSV</a></td></tr>
                            <tr><td>Sociedad y Comunidades</td><td class="text-center">237</td><td class="text-center"><a href="data/ejes/sociedad_comunidades.csv" download class="btn btn-sm btn-outline-success">CSV</a></td></tr>
                            <tr><td>Econom√≠a y Desarrollo</td><td class="text-center">230</td><td class="text-center"><a href="data/ejes/economia_desarrollo.csv" download class="btn btn-sm btn-outline-success">CSV</a></td></tr>
                            <tr><td>Crimen e Ilegalidad</td><td class="text-center">148</td><td class="text-center"><a href="data/ejes/crimen_ilegalidad.csv" download class="btn btn-sm btn-outline-success">CSV</a></td></tr>
                        </tbody>
                    </table>
                </section>

            </div>
        </div>
    </div>

    <footer class="text-center">
        <p>Lupa Ecol√≥gica | 2026</p>
        <p class="small">Datos: https://faridmayorga.github.io/lupaecologica/</p>
    </footer>

    <script>
        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute("data-bs-theme");
            const newTheme = currentTheme === "light" ? "dark" : "light";
            body.setAttribute("data-bs-theme", newTheme);
        }

        function toggleMenu() {
            const menu = document.getElementById("dlMenu");
            menu.style.display = menu.style.display === "block" ? "none" : "block";
        }

        // Cerrar men√∫ al hacer clic fuera
        window.onclick = function(event) {
            if (!event.target.matches('.btn-verde')) {
                const menu = document.getElementById("dlMenu");
                if (menu.style.display === "block") menu.style.display = "none";
            }
        }
    </script>
</body>
</html>
